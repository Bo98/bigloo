#*=====================================================================*/
#*    serrano/prgm/project/bigloo/cigloo/Example/Makefile              */
#*    -------------------------------------------------------------    */
#*    Author      :  Manuel Serrano                                    */
#*    Creation    :  Tue Dec  5 10:30:51 1995                          */
#*    Last change :  Mon Sep  7 09:26:48 2009 (serrano)                */
#*    -------------------------------------------------------------    */
#*    The `example' Makefile                                           */
#*=====================================================================*/

#*---------------------------------------------------------------------*/
#*    Default configuration                                            */
#*---------------------------------------------------------------------*/
include ../../Makefile.config

#*---------------------------------------------------------------------*/
#*    flags                                                            */
#*---------------------------------------------------------------------*/
BIGLOO		= $(BUILDBIGLOO)
CIGLOO		= $(BUILDBINDIR)/cigloo
CIFLAGS		= -open-includes 
SHELL           = /bin/sh
BFLAGS          = -O3 -cg
CFLAGS		= -w

#*---------------------------------------------------------------------*/
#*    all                                                              */
#*---------------------------------------------------------------------*/
all: b-file.o c-file.o
	$(BIGLOO) $(BFLAGS) b-file.o c-file.o -o ctest

#*---------------------------------------------------------------------*/
#*    Clean                                                            */
#*---------------------------------------------------------------------*/
clean: 
	@- $(RM) -f b-file.c ex ctest
	@- $(RM) -f *.o
	@- $(RM) -f *.sch 
	@- $(RM) -f *~

#*---------------------------------------------------------------------*/
#*    c-file.o                                                         */
#*---------------------------------------------------------------------*/
c-file.o: c-file.c c-file.h
	$(CC) $(CFLAGS) c-file.c -c

#*---------------------------------------------------------------------*/
#*    b-file.o                                                         */
#*---------------------------------------------------------------------*/
b-file.o: b-file.scm b-file.sch
	$(BIGLOO) $(BFLAGS) b-file.scm -c

#*---------------------------------------------------------------------*/
#*    b-file.sch                                                       */
#*---------------------------------------------------------------------*/
b-file.sch: c-file.c c-file.h
	$(CIGLOO) $(CIFLAGS) c-file.c -o b-file.sch
